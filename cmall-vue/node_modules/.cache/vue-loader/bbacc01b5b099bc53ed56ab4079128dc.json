{"remainingRequest":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myShop\\cmall-vue\\src\\views\\UserAddress.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\myShop\\cmall-vue\\src\\views\\UserAddress.vue","mtime":1713966379508},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1714004800982},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1714004801336}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgQ2VudGVyTWVudSBmcm9tICcuLi9jb21wb25lbnRzL0NlbnRlck1lbnUnDQppbXBvcnQgKiBhcyBhZGRyZXNzZXNBUEkgZnJvbSAnQC9hcGkvYWRkcmVzc2VzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnRGV0YWlscycsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFkZHJlc3M6IFtdLA0KICAgICAgYWRkVmlzaWJsZTogZmFsc2UsDQogICAgICBlZGl0VmlzaWJsZTogZmFsc2UsDQogICAgICBkZWxldGVWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGNvbmZpcm1BZGRyZXNzOiAwLCAvLyDpgInmi6nnmoTlnLDlnYBpZA0KICAgICAgYWRkcmVzc0lEOiAwLA0KICAgICAgYWRkcmVzc0luZGV4OiAwLA0KICAgICAgZm9ybTogew0KICAgICAgICBpZDogJycsDQogICAgICAgIHVzZXJfaWQ6ICcnLA0KICAgICAgICBuYW1lOiAnJywNCiAgICAgICAgcGhvbmU6ICcnLA0KICAgICAgICBhZGRyZXNzOiAnJw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldEFkZHJlc3MoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0QWRkcmVzcygpIHsNCiAgICAgIGFkZHJlc3Nlc0FQSQ0KICAgICAgICAuc2hvd0FkZHJlc3Nlcyh0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFVzZXIuaWQpDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy5hZGRyZXNzID0gcmVzLmRhdGENCiAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5zdGF0dXMgPT09IDIwMDAxKSB7DQogICAgICAgICAgICAvL3Rva2Vu6L+H5pyf77yM6ZyA6KaB6YeN5paw55m75b2VDQogICAgICAgICAgICB0aGlzLmxvZ2luRXhwaXJlZChyZXMubXNnKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCfojrflj5bmlLbotKflnLDlnYDlpLHotKUnLCByZXMubXNnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcign6I635Y+W5pS26LSn5Zyw5Z2A5aSx6LSlJywgZXJyKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgbW91c2VFbnRlcihpdGVtKSB7DQogICAgICBpdGVtLnNlZW4gPSB0cnVlDQogICAgICB0aGlzLmNvbmZpcm1BZGRyZXNzID0gaXRlbS5pZA0KICAgIH0sDQogICAgbW91c2VMZWF2ZShpdGVtKSB7DQogICAgICBpdGVtLnNlZW4gPSBmYWxzZQ0KICAgICAgdGhpcy5jb25maXJtQWRkcmVzcyA9IDANCiAgICB9LA0KICAgIGVkaXQoaXRlbSkgew0KICAgICAgdGhpcy5mb3JtID0gaXRlbQ0KICAgICAgdGhpcy5lZGl0VmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIGRlbGV0ZURpYWxvZyh2YWwsIGluZGV4KSB7DQogICAgICB0aGlzLmFkZHJlc3NJRCA9IHZhbA0KICAgICAgdGhpcy5hZGRyZXNzSW5kZXggPSBpbmRleA0KICAgICAgdGhpcy5kZWxldGVWaXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgcG9zdEVkaXQoKSB7DQogICAgICB0aGlzLmZvcm0udXNlcl9pZCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXNlci5pZA0KICAgICAgYWRkcmVzc2VzQVBJDQogICAgICAgIC5wb3N0QWRkcmVzcyh0aGlzLmZvcm0pDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy5hZGRyZXNzID0gcmVzLmRhdGENCiAgICAgICAgICAgIHRoaXMuYWRkVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2NlZWQoJ+aWsOW7uuaUtui0p+WcsOWdgOaIkOWKnycpDQogICAgICAgICAgfSBlbHNlIGlmIChyZXMuc3RhdHVzID09PSAyMDAwMSkgew0KICAgICAgICAgICAgLy90b2tlbui/h+acn++8jOmcgOimgemHjeaWsOeZu+W9lQ0KICAgICAgICAgICAgdGhpcy5sb2dpbkV4cGlyZWQocmVzLm1zZykNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcign5paw5bu65pS26LSn5Zyw5Z2A5aSx6LSlJywgcmVzLm1zZykNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IoJ+aWsOW7uuaUtui0p+WcsOWdgOWksei0pScsIGVycikNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIHNhdmVFZGl0KCkgew0KICAgICAgdGhpcy5mb3JtLnVzZXJfaWQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFVzZXIuaWQNCiAgICAgIGFkZHJlc3Nlc0FQSQ0KICAgICAgICAudXBkYXRlQWRkcmVzcyh0aGlzLmZvcm0pDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy5hZGRyZXNzID0gcmVzLmRhdGENCiAgICAgICAgICAgIHRoaXMuZWRpdFZpc2libGUgPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZWVkKCfkv67mlLnmlLbotKflnLDlnYDmiJDlip8nKQ0KICAgICAgICAgIH0gZWxzZSBpZiAocmVzLnN0YXR1cyA9PT0gMjAwMDEpIHsNCiAgICAgICAgICAgIC8vdG9rZW7ov4fmnJ/vvIzpnIDopoHph43mlrDnmbvlvZUNCiAgICAgICAgICAgIHRoaXMubG9naW5FeHBpcmVkKHJlcy5tc2cpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IoJ+S/ruaUueaUtui0p+WcsOWdgOWksei0pScsIHJlcy5tc2cpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCfkv67mlLnmlLbotKflnLDlnYDlpLHotKUnLCBlcnIpDQogICAgICAgIH0pDQogICAgfSwNCiAgICBkZWxldGVBZGRyZXNzKCkgew0KICAgICAgYWRkcmVzc2VzQVBJDQogICAgICAgIC5kZWxldGVBZGRyZXNzKHRoaXMuYWRkcmVzc0lEKQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICAgIHRoaXMuYWRkcmVzcy5zcGxpY2UodGhpcy5hZGRyZXNzSW5kZXgsIDEpDQogICAgICAgICAgICB0aGlzLmRlbGV0ZVZpc2libGUgPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy5ub3RpZnlTdWNjZWVkKCfliKDpmaTmlLbotKflnLDlnYDmiJDlip8nKQ0KICAgICAgICAgIH0gZWxzZSBpZiAocmVzLnN0YXR1cyA9PT0gMjAwMDEpIHsNCiAgICAgICAgICAgIC8vdG9rZW7ov4fmnJ/vvIzpnIDopoHph43mlrDnmbvlvZUNCiAgICAgICAgICAgIHRoaXMubG9naW5FeHBpcmVkKHJlcy5tc2cpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IoJ+WIoOmZpOaUtui0p+WcsOWdgOWksei0pScsIHJlcy5tc2cpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCfliKDpmaTmlLbotKflnLDlnYDlpLHotKUnLCBlcnIpDQogICAgICAgIH0pDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgQ2VudGVyTWVudQ0KICB9DQp9DQo="},{"version":3,"sources":["UserAddress.vue"],"names":[],"mappings":";AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserAddress.vue","sourceRoot":"src/views","sourcesContent":["<!--\r\n * @Descripttion: 收货地址页面组件\r\n * @Author: congz\r\n * @Date: 2020-07-11 15:12:07\r\n * @LastEditors: congz\r\n * @LastEditTime: 2020-08-05 15:40:11\r\n--> \r\n\r\n<template>\r\n  <div class=\"address\" id=\"address\" name=\"address\">\r\n    <div class=\"address-layout\">\r\n      <el-row :gutter=\"10\">\r\n        <div>\r\n          <CenterMenu></CenterMenu>\r\n        </div>\r\n        <el-col :span=\"20\">\r\n          <div class=\"address-content\">\r\n            <div class=\"extra\"></div>\r\n            <div class=\"address-title\">\r\n              <p>收货地址</p>\r\n            </div>\r\n            <div class=\"address-body\">\r\n              <ul>\r\n                <router-link to>\r\n                  <li class=\"add-address\" @click=\"addVisible=true\">\r\n                    <i class=\"el-icon-circle-plus-outline\"></i>\r\n                    <p>添加新地址</p>\r\n                  </li>\r\n                </router-link>\r\n                <router-link to>\r\n                  <li\r\n                    :class=\"item.id == confirmAddress ? 'in-section' : ''\"\r\n                    v-for=\"(item,index) in address\"\r\n                    :key=\"item.id\"\r\n                    @mouseenter=\"mouseEnter(item)\"\r\n                    @mouseleave=\"mouseLeave(item)\"\r\n                  >\r\n                    <h2>{{item.name}}</h2>\r\n                    <p class=\"phone\">{{item.phone}}</p>\r\n                    <p class=\"address\">{{item.address}}</p>\r\n                    <div class=\"operate\" v-show=\"item.seen\">\r\n                      <span @click=\"edit(item)\">修改</span>\r\n                      <span @click=\"deleteDialog(item.id,index)\">删除</span>\r\n                    </div>\r\n                  </li>\r\n                </router-link>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <!-- 新建收货地址弹出框 -->\r\n          <el-dialog title=\"新建收货地址\" :visible.sync=\"addVisible\" width=\"30%\">\r\n            <el-form ref=\"form\" :model=\"form\" label-width=\"70px\">\r\n              <el-form-item label=\"姓名\">\r\n                <el-input v-model=\"form.name\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"手机号\">\r\n                <el-input v-model=\"form.phone\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"详细地址\">\r\n                <el-input type=\"textarea\" rows=\"5\" v-model=\"form.address\"></el-input>\r\n              </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button type=\"primary\" @click=\"postEdit\">确 定</el-button>\r\n              <el-button @click=\"addVisible = false\">取 消</el-button>\r\n            </span>\r\n          </el-dialog>\r\n          <!-- 新建收货地址弹出框END -->\r\n          <!-- 修改收货地址弹出框 -->\r\n          <el-dialog title=\"修改收货地址\" :visible.sync=\"editVisible\" width=\"30%\">\r\n            <el-form ref=\"form\" :model=\"form\" label-width=\"70px\">\r\n              <el-form-item label=\"姓名\">\r\n                <el-input v-model=\"form.name\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"手机号\">\r\n                <el-input v-model=\"form.phone\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"详细地址\">\r\n                <el-input type=\"textarea\" rows=\"5\" v-model=\"form.address\"></el-input>\r\n              </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button type=\"primary\" @click=\"saveEdit\">确 定</el-button>\r\n              <el-button @click=\"editVisible = false\">取 消</el-button>\r\n            </span>\r\n          </el-dialog>\r\n          <!-- 修改收货地址弹出框END -->\r\n          <!-- 删除收货地址弹出框 -->\r\n          <el-dialog title=\"提示\" :visible.sync=\"deleteVisible\" width=\"30%\" center>\r\n            <div class=\"delete-dialog\">\r\n              <span>确认删除该地址吗？</span>\r\n            </div>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button type=\"primary\" @click=\"deleteAddress\">确 定</el-button>\r\n              <el-button @click=\"deleteVisible = false\">取 消</el-button>\r\n            </span>\r\n          </el-dialog>\r\n          <!-- 删除收货地址弹出框END -->\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport CenterMenu from '../components/CenterMenu'\r\nimport * as addressesAPI from '@/api/addresses'\r\nexport default {\r\n  name: 'Details',\r\n  data() {\r\n    return {\r\n      address: [],\r\n      addVisible: false,\r\n      editVisible: false,\r\n      deleteVisible: false,\r\n      confirmAddress: 0, // 选择的地址id\r\n      addressID: 0,\r\n      addressIndex: 0,\r\n      form: {\r\n        id: '',\r\n        user_id: '',\r\n        name: '',\r\n        phone: '',\r\n        address: ''\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getAddress()\r\n  },\r\n  methods: {\r\n    getAddress() {\r\n      addressesAPI\r\n        .showAddresses(this.$store.getters.getUser.id)\r\n        .then(res => {\r\n          if (res.status === 200) {\r\n            this.address = res.data\r\n          } else if (res.status === 20001) {\r\n            //token过期，需要重新登录\r\n            this.loginExpired(res.msg)\r\n          } else {\r\n            this.notifyError('获取收货地址失败', res.msg)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.notifyError('获取收货地址失败', err)\r\n        })\r\n    },\r\n    mouseEnter(item) {\r\n      item.seen = true\r\n      this.confirmAddress = item.id\r\n    },\r\n    mouseLeave(item) {\r\n      item.seen = false\r\n      this.confirmAddress = 0\r\n    },\r\n    edit(item) {\r\n      this.form = item\r\n      this.editVisible = true\r\n    },\r\n    deleteDialog(val, index) {\r\n      this.addressID = val\r\n      this.addressIndex = index\r\n      this.deleteVisible = true\r\n    },\r\n    postEdit() {\r\n      this.form.user_id = this.$store.getters.getUser.id\r\n      addressesAPI\r\n        .postAddress(this.form)\r\n        .then(res => {\r\n          if (res.status === 200) {\r\n            this.address = res.data\r\n            this.addVisible = false\r\n            this.notifySucceed('新建收货地址成功')\r\n          } else if (res.status === 20001) {\r\n            //token过期，需要重新登录\r\n            this.loginExpired(res.msg)\r\n          } else {\r\n            this.notifyError('新建收货地址失败', res.msg)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.notifyError('新建收货地址失败', err)\r\n        })\r\n    },\r\n    saveEdit() {\r\n      this.form.user_id = this.$store.getters.getUser.id\r\n      addressesAPI\r\n        .updateAddress(this.form)\r\n        .then(res => {\r\n          if (res.status === 200) {\r\n            this.address = res.data\r\n            this.editVisible = false\r\n            this.notifySucceed('修改收货地址成功')\r\n          } else if (res.status === 20001) {\r\n            //token过期，需要重新登录\r\n            this.loginExpired(res.msg)\r\n          } else {\r\n            this.notifyError('修改收货地址失败', res.msg)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.notifyError('修改收货地址失败', err)\r\n        })\r\n    },\r\n    deleteAddress() {\r\n      addressesAPI\r\n        .deleteAddress(this.addressID)\r\n        .then(res => {\r\n          if (res.status === 200) {\r\n            this.address.splice(this.addressIndex, 1)\r\n            this.deleteVisible = false\r\n            this.notifySucceed('删除收货地址成功')\r\n          } else if (res.status === 20001) {\r\n            //token过期，需要重新登录\r\n            this.loginExpired(res.msg)\r\n          } else {\r\n            this.notifyError('删除收货地址失败', res.msg)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.notifyError('删除收货地址失败', err)\r\n        })\r\n    }\r\n  },\r\n  components: {\r\n    CenterMenu\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.address-layout {\r\n  max-width: 1225px;\r\n  margin: 0 auto;\r\n}\r\n.address-content {\r\n  background-color: #ffffff;\r\n  margin-bottom: 30px;\r\n}\r\n.address-title {\r\n  height: 100px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.address-title p {\r\n  font-size: 30px;\r\n  color: #757575;\r\n  margin-left: 50px;\r\n}\r\n.extra {\r\n  height: 10px;\r\n}\r\n/*收货地址列表*/\r\n.address .address-layout .address-content .address-body {\r\n  overflow: hidden;\r\n  width: 910px;\r\n  margin: 0 auto;\r\n}\r\n.address .address-layout .address-content .address-body ul li {\r\n  float: left;\r\n  color: #333;\r\n  width: 220px;\r\n  height: 178px;\r\n  border: 1px solid #e0e0e0;\r\n  padding: 15px 24px 0;\r\n  margin-right: 17px;\r\n  margin-bottom: 24px;\r\n}\r\n.address .address-layout .address-content .address-body .in-section {\r\n  border: 1px solid #ff6700;\r\n}\r\n.address .address-layout .address-content .address-body li h2 {\r\n  font-size: 18px;\r\n  font-weight: normal;\r\n  line-height: 30px;\r\n  margin-bottom: 10px;\r\n}\r\n.address .address-layout .address-content .address-body li p {\r\n  font-size: 14px;\r\n  color: #757575;\r\n}\r\n.address .address-layout .address-content .address-body li .address {\r\n  padding: 10px 0;\r\n  max-width: 180px;\r\n  height: 70px;\r\n  line-height: 22px;\r\n  overflow: hidden;\r\n}\r\n\r\n.address .address-layout .address-content .address-body li .operate {\r\n  color: #ff6700;\r\n  font-size: 14px;\r\n  float: right;\r\n}\r\n\r\n.address .address-layout .address-content .address-body li .operate span {\r\n  margin-right: 10px;\r\n}\r\n.address .address-layout .address-content .address-body .add-address {\r\n  text-align: center;\r\n  line-height: 30px;\r\n}\r\n.address .address-layout .address-content .address-body .add-address i {\r\n  font-size: 30px;\r\n  padding-top: 50px;\r\n  text-align: center;\r\n}\r\n/*收货地址列表END*/\r\n.address .address-layout .delete-dialog {\r\n  margin: 0 auto;\r\n  width: 180px;\r\n  font-size: 20px;\r\n}\r\n</style>"]}]}