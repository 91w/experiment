{"remainingRequest":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myShop\\cmall-vue\\src\\views\\VaildEmail.vue?vue&type=style&index=0&id=193742e0&scoped=true&lang=css","dependencies":[{"path":"D:\\myShop\\cmall-vue\\src\\views\\VaildEmail.vue","mtime":1713966379509},{"path":"D:\\myShop\\cmall-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1714004800405},{"path":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1714004801776},{"path":"D:\\myShop\\cmall-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1714004800978},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1714004801336}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoudmFpbGQtZW1haWwgew0KICBoZWlnaHQ6IDcwMHB4Ow0KICBkaXNwbGF5OiBmbGV4Ow0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KfQ0KLnZhaWxkLWVtYWlsIC52YWlsZC1lbWFpbC1jb250ZW50IHsNCiAgd2lkdGg6IDUwMHB4Ow0KICBtYXJnaW46IDAgYXV0bzsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0K"},{"version":3,"sources":["VaildEmail.vue"],"names":[],"mappings":";AA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VaildEmail.vue","sourceRoot":"src/views","sourcesContent":["<!--\r\n * @Descripttion: 登录页面组件\r\n * @Author: congz\r\n * @Date: 2020-06-11 11:08:34\r\n * @LastEditors: congz\r\n * @LastEditTime: 2020-08-09 20:05:20\r\n--> \r\n\r\n<template>\r\n  <div class=\"vaild-email\">\r\n    <div class=\"vaild-email-content\">\r\n      <p>{{message}}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport * as userAPI from '@/api/users'\r\nimport { mapActions } from 'vuex'\r\nexport default {\r\n  name: 'VaildEmail',\r\n  data() {\r\n    return {\r\n      token: '',\r\n      message: '正在绑定/解绑邮箱，请稍候...'\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['setUser']),\r\n    vaild() {\r\n      userAPI\r\n        .vaildEmail(this.token)\r\n        .then(res => {\r\n          if (res.status === 200) {\r\n            let user = JSON.stringify(res.data)\r\n            localStorage.setItem('user', user)\r\n            this.setUser(res.data)\r\n            this.message = '邮箱绑定/解绑成功，跳转页面中...'\r\n            this.$router.push({\r\n              name: 'Center'\r\n            })\r\n            this.notifySucceed('绑定/解绑成功')\r\n          } else if (res.status === 201) {\r\n            // 清空本地登录信息\r\n            localStorage.removeItem('user')\r\n            localStorage.removeItem('token')\r\n            // 清空vuex登录信息\r\n            this.setUser('')\r\n            this.$router.push({\r\n              name: 'Login'\r\n            })\r\n            this.notifySucceed('密码已修改，请重新登录')\r\n          } else if (res.status === 20001) {\r\n            this.notifyError('该链接已失效，请重新绑定/解绑', res.msg)\r\n            this.$router.push({\r\n              name: 'Center'\r\n            })\r\n          } else {\r\n            this.notifyError('邮箱绑定/解绑失败', res.msg)\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.notifyError('邮箱绑定/解绑失败', error)\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    this.token = this.$route.params.token\r\n    this.vaild()\r\n  },\r\n  components: {}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.vaild-email {\r\n  height: 700px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.vaild-email .vaild-email-content {\r\n  width: 500px;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n}\r\n</style>\r\n"]}]}