{"remainingRequest":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myShop\\cmall-vue\\src\\views\\OrderDetails.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\myShop\\cmall-vue\\src\\views\\OrderDetails.vue","mtime":1714519551450},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1714004800982},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1714004801336}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgQ2VudGVyTWVudSBmcm9tICcuLi9jb21wb25lbnRzL0NlbnRlck1lbnUnDQppbXBvcnQgKiBhcyBvcmRlcnNBUEkgZnJvbSAnQC9hcGkvb3JkZXJzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnT3JkZXJEZXRhaWxzJywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgb3JkZXJOdW06ICcnLCAvLyDorqLljZVudW0sDQogICAgICBvcmRlcjogJycsDQogICAgICBhZGRyZXNzOiAnJywNCiAgICAgIHRvdGFsX3ByaWNlOiAnJywNCiAgICAgIHVzZXI6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSkNCiAgICB9DQogIH0sDQogIGFjdGl2YXRlZCgpIHsNCiAgICBpZiAodGhpcy4kcm91dGUucXVlcnkub3JkZXJOdW0gIT0gdW5kZWZpbmVkKSB7DQogICAgICB0aGlzLm9yZGVyTnVtID0gdGhpcy4kcm91dGUucXVlcnkub3JkZXJOdW0NCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgLy8g55uR5ZCs5ZWG5ZOBaWTnmoTlj5jljJbvvIzor7fmsYLlkI7nq6/ojrflj5bllYblk4HmlbDmja4NCiAgICBvcmRlck51bTogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLmxvYWQoKQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGxvYWQoKSB7DQogICAgICBvcmRlcnNBUEkNCiAgICAgICAgLnNob3dPcmRlcih0aGlzLm9yZGVyTnVtLCB0aGlzLnVzZXIuaWQpDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgaWYgKHJlcy5tc2cgPT09ICfmiJDlip8nKSB7DQogICAgICAgICAgICB0aGlzLm9yZGVyID0gcmVzLmRhdGENCiAgICAgICAgICAgIHRoaXMuYWRkcmVzcyA9IHJlcy5hZGRyZXNzDQogICAgICAgICAgICB0aGlzLm9yZGVyTnVtID0gcmVzLm9yZGVyaWQNCiAgICAgICAgICAgIHRoaXMudG90YWxfcHJpY2UgPSByZXMudG90YWxfcHJpY2UNCiAgICAgICAgICB9ICBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IoJ+iOt+WPluiuouWNleWksei0pScsIHJlcy5tc2cpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCfojrflj5borqLljZXlpLHotKUnLCBlcnIpDQogICAgICAgIH0pDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgQ2VudGVyTWVudQ0KICB9DQp9DQo="},{"version":3,"sources":["OrderDetails.vue"],"names":[],"mappings":";AAiJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OrderDetails.vue","sourceRoot":"src/views","sourcesContent":["<!--\r\n * @Descripttion: \r\n * @Author: congz\r\n * @Date: 2020-07-22 13:14:57\r\n * @LastEditors: congz\r\n * @LastEditTime: 2020-08-13 10:34:49\r\n--> \r\n<template>\r\n  <div class=\"order-details\" id=\"order-details\" name=\"order-details\">\r\n    <div class=\"order-details-layout\" v-if=\"order\">\r\n      <el-row :gutter=\"10\">\r\n        <div>\r\n          <CenterMenu></CenterMenu>\r\n        </div>\r\n        <el-col :span=\"20\">\r\n          <div class=\"order-details-content\">\r\n            <div class=\"extra\"></div>\r\n            <div class=\"order-details-title\">\r\n              <p>订单详情</p>\r\n            </div>\r\n            <div class=\"order-operate\">\r\n              <div class=\"order-num\">订单号：{{order[0].orderid}}</div>\r\n              <div class=\"order-button\" v-if=\"order[0].type==1\">\r\n                <el-button class=\"cancel\" type=\"info\" size=\"small\" style=\"width:120px\" plain>取消订单</el-button>\r\n                <router-link :to=\"{ path: '/payment', query: {orderNum:order[0].orderid}}\">\r\n                  <el-button class=\"pay\" size=\"small\" style=\"width:120px\">立即付款</el-button>\r\n                </router-link>\r\n              </div>\r\n            </div>\r\n            <div class=\"order-step-info\" v-if=\"order[0].type==1\">等待付款</div>\r\n            <div class=\"order-success-info\" v-else>已付款</div>\r\n            <div class=\"order-step\">\r\n              <el-steps\r\n                :space=\"200\"\r\n                :active=\"order.type==1?1:5\"\r\n                finish-status=\"success\"\r\n                align-center\r\n              >\r\n                <el-step title=\"下单\" :description=\"order[0].createtime| dateFormat\"></el-step>\r\n                <el-step title=\"付款\" v-if=\"order[0].type==1\"></el-step>\r\n                <el-step title=\"付款\" :description=\"order[0].createtime| dateFormat\" v-else></el-step>\r\n                <el-step title=\"配货\"></el-step>\r\n                <el-step title=\"出库\"></el-step>\r\n                <el-step title=\"交易成功\"></el-step>\r\n              </el-steps>\r\n            </div>\r\n            <div class=\"extra\"></div>\r\n            <div class=\"extra\"></div>\r\n\r\n            <div class=\"order-list-product\" v-for=\"item in order\" :key=\"item.commid\">\r\n              <div class=\"pro-img\">\r\n                <router-link :to=\"{ path: '/goods/details', query: {productID:item.commid} }\">\r\n                  <img :src=\"'data:image/jpeg;base64,' + item.mainimg\"/>\r\n                </router-link>\r\n              </div>\r\n              <div class=\"pro-info\">\r\n                <span style=\"margin-bottom:7px\">\r\n                  <router-link\r\n                    class=\"info-href\"\r\n                    :to=\"{ path: '/goods/details', query: {productID:item.commid} }\"\r\n                  >{{item.commname}}</router-link>\r\n                </span>\r\n              </div>\r\n              <div class=\"pro-price\">\r\n                <span>\r\n                  {{item.thinkmoney}}元&nbsp;\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class=\"order-address-title\">收货信息</div>\r\n            <div class=\"order-address\">\r\n              <div class=\"order-address-head\">\r\n                <p>姓名：</p>\r\n                <p>联系电话：</p>\r\n                <p>收货地址：</p>\r\n              </div>\r\n              <div class=\"order-address-data\">\r\n                <p>{{address.name}}</p>\r\n                <p>{{address.phone}}</p>\r\n                <p>{{address.address}}</p>\r\n              </div>\r\n            </div>\r\n            <div class=\"order-address-title\">支付方式</div>\r\n            <div class=\"order-address\">\r\n              <div class=\"order-address-head\">\r\n                <p>支付方式：</p>\r\n              </div>\r\n              <div class=\"order-address-data\">\r\n                <p>在线支付</p>\r\n              </div>\r\n            </div>\r\n            <div class=\"order-address-title\">发票信息</div>\r\n            <div class=\"order-address\">\r\n              <div class=\"order-address-head\">\r\n                <p>发票类型：</p>\r\n                <p>发票内容：</p>\r\n                <p>发票抬头：</p>\r\n              </div>\r\n              <div class=\"order-address-data\">\r\n                <p>电子普通发票</p>\r\n                <p>购买商品明细</p>\r\n                <p>个人</p>\r\n              </div>\r\n            </div>\r\n            <!-- 结算列表 -->\r\n            <div class=\"section-count\">\r\n              <div class=\"money-box\">\r\n                <ul>\r\n                  <li>\r\n                    <span class=\"title\">商品件数：</span>\r\n                    <span class=\"value\">{{order.length}}件</span>\r\n                  </li>\r\n                  <li>\r\n                    <span class=\"title\">商品总价：</span>\r\n                    <span class=\"value\">{{total_price}}元</span>\r\n                  </li>\r\n                  <li>\r\n                    <span class=\"title\">活动优惠：</span>\r\n                    <span class=\"value\">-0元</span>\r\n                  </li>\r\n                  <li>\r\n                    <span class=\"title\">优惠券抵扣：</span>\r\n                    <span class=\"value\">-0元</span>\r\n                  </li>\r\n                  <li>\r\n                    <span class=\"title\">运费：</span>\r\n                    <span class=\"value\">0元</span>\r\n                  </li>\r\n                  <li class=\"total\">\r\n                    <span class=\"title\">应付总额：</span>\r\n                    <span class=\"value\">\r\n                      <span class=\"total-price\">{{total_price}}</span>元\r\n                    </span>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <div class=\"not-found\" v-else>查询不到该订单</div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport CenterMenu from '../components/CenterMenu'\r\nimport * as ordersAPI from '@/api/orders'\r\nexport default {\r\n  name: 'OrderDetails',\r\n  data() {\r\n    return {\r\n      orderNum: '', // 订单num,\r\n      order: '',\r\n      address: '',\r\n      total_price: '',\r\n      user: JSON.parse(localStorage.getItem('user'))\r\n    }\r\n  },\r\n  activated() {\r\n    if (this.$route.query.orderNum != undefined) {\r\n      this.orderNum = this.$route.query.orderNum\r\n    }\r\n  },\r\n  watch: {\r\n    // 监听商品id的变化，请求后端获取商品数据\r\n    orderNum: function() {\r\n      this.load()\r\n    }\r\n  },\r\n  methods: {\r\n    load() {\r\n      ordersAPI\r\n        .showOrder(this.orderNum, this.user.id)\r\n        .then(res => {\r\n          if (res.msg === '成功') {\r\n            this.order = res.data\r\n            this.address = res.address\r\n            this.orderNum = res.orderid\r\n            this.total_price = res.total_price\r\n          }  else {\r\n            this.notifyError('获取订单失败', res.msg)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.notifyError('获取订单失败', err)\r\n        })\r\n    }\r\n  },\r\n  components: {\r\n    CenterMenu\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.order-details-layout {\r\n  max-width: 1225px;\r\n  margin: 0 auto;\r\n}\r\n.order-details-content {\r\n  background-color: #ffffff;\r\n  margin-bottom: 30px;\r\n}\r\n.order-details-title {\r\n  height: 100px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.order-details-title p {\r\n  font-size: 30px;\r\n  color: #757575;\r\n  margin-left: 50px;\r\n}\r\n.extra {\r\n  height: 10px;\r\n}\r\n/*订单号按钮区域*/\r\n.order-details-content .order-operate {\r\n  width: 920px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n.order-details-content .order-operate .order-num {\r\n  width: 500px;\r\n  font-size: 18px;\r\n  margin-bottom: 17px;\r\n  color: #242424;\r\n}\r\n.order-details-content .order-operate .order-button {\r\n  margin-left: 170px;\r\n}\r\n.order-details-content .order-operate .order-button .pay {\r\n  margin-left: 10px;\r\n  background-color: #ff6700;\r\n  color: #ffffff;\r\n}\r\n/*订单号按钮区域END*/\r\n/*进度条区域*/\r\n.order-details-content .order-step-info {\r\n  width: 920px;\r\n  margin: 0 auto;\r\n  color: #ff6700;\r\n  font-size: 18px;\r\n  margin-top: 20px;\r\n}\r\n.order-details-content .order-success-info {\r\n  width: 920px;\r\n  margin: 0 auto;\r\n  color: #00a724;\r\n  font-size: 18px;\r\n  margin-top: 20px;\r\n}\r\n.order-details-content .order-step {\r\n  width: 920px;\r\n  margin: 0 auto;\r\n  margin-top: 40px;\r\n}\r\n/*进度条区域END*/\r\n/*订单商品区域*/\r\n.order-details-content .order-list-product {\r\n  width: 920px;\r\n  height: 110px;\r\n  background-color: #ffffff;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  align-items: center;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n.order-details-content .order-list-product .pro-img {\r\n  margin-right: 20px;\r\n}\r\n.order-details-content .order-list-product .pro-img img {\r\n  height: 80px;\r\n  width: 80px;\r\n}\r\n.order-details-content .order-list-product .pro-info {\r\n  font-size: 15px;\r\n  color: #333333;\r\n}\r\n.order-details-content .order-list-product .pro-info .info-href {\r\n  font-size: 15px;\r\n  color: #333333;\r\n}\r\n.order-details-content .order-list-product .pro-info .info-href:hover {\r\n  color: #ff6700;\r\n}\r\n.order-details-content .order-list-product .pro-price {\r\n  margin-left: 30px;\r\n  font-size: 15px;\r\n  color: #333333;\r\n}\r\n\r\n/*订单商品区域END*/\r\n/*订单收货信息区域*/\r\n.order-details-content .order-address-title {\r\n  width: 920px;\r\n  margin: 0 auto;\r\n  color: #242424;\r\n  font-size: 18px;\r\n  margin-top: 20px;\r\n}\r\n.order-details-content .order-address {\r\n  width: 920px;\r\n  height: 120px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  align-items: center;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n.order-details-content .order-address .order-address-head {\r\n  font-size: 15px;\r\n  line-height: 25px;\r\n  font-weight: bold;\r\n  color: #757575;\r\n}\r\n.order-details-content .order-address .order-address-data {\r\n  font-size: 15px;\r\n  line-height: 25px;\r\n  color: #757575;\r\n}\r\n/*订单收货信息区域END*/\r\n\r\n/* 结算列表CSS */\r\n.order-details-content .section-count {\r\n  margin: 0 48px;\r\n  padding: 20px 0;\r\n  overflow: hidden;\r\n}\r\n.order-details-content .section-count .money-box {\r\n  float: right;\r\n  text-align: right;\r\n}\r\n.order-details-content .section-count .money-box .title {\r\n  float: left;\r\n  width: 126px;\r\n  height: 30px;\r\n  display: block;\r\n  line-height: 30px;\r\n  color: #757575;\r\n}\r\n.order-details-content .section-count .money-box .value {\r\n  float: left;\r\n  min-width: 105px;\r\n  height: 30px;\r\n  display: block;\r\n  line-height: 30px;\r\n  color: #ff6700;\r\n}\r\n.order-details-content .section-count .money-box .total .title {\r\n  padding-top: 15px;\r\n}\r\n.order-details-content .section-count .money-box .total .value {\r\n  padding-top: 10px;\r\n}\r\n.order-details-content .section-count .money-box .total-price {\r\n  font-size: 30px;\r\n}\r\n/* 结算列表CSS END */\r\n\r\n/*v-else*/\r\n.order-details .not-found {\r\n  height: 500px;\r\n  text-align: center;\r\n}\r\n/*v-else END*/\r\n</style>"]}]}