{"remainingRequest":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myShop\\cmall-vue\\src\\views\\VaildEmail.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\myShop\\cmall-vue\\src\\views\\VaildEmail.vue","mtime":1713966379509},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1714004800982},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1714004801336}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgKiBhcyB1c2VyQVBJIGZyb20gJ0AvYXBpL3VzZXJzJw0KaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdWYWlsZEVtYWlsJywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdG9rZW46ICcnLA0KICAgICAgbWVzc2FnZTogJ+ato+WcqOe7keWumi/op6Pnu5Hpgq7nrrHvvIzor7fnqI3lgJkuLi4nDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucyhbJ3NldFVzZXInXSksDQogICAgdmFpbGQoKSB7DQogICAgICB1c2VyQVBJDQogICAgICAgIC52YWlsZEVtYWlsKHRoaXMudG9rZW4pDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgICAgbGV0IHVzZXIgPSBKU09OLnN0cmluZ2lmeShyZXMuZGF0YSkNCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgdXNlcikNCiAgICAgICAgICAgIHRoaXMuc2V0VXNlcihyZXMuZGF0YSkNCiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9ICfpgq7nrrHnu5Hlrpov6Kej57uR5oiQ5Yqf77yM6Lez6L2s6aG16Z2i5LitLi4uJw0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICAgICAgICBuYW1lOiAnQ2VudGVyJw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2VlZCgn57uR5a6aL+ino+e7keaIkOWKnycpDQogICAgICAgICAgfSBlbHNlIGlmIChyZXMuc3RhdHVzID09PSAyMDEpIHsNCiAgICAgICAgICAgIC8vIOa4heepuuacrOWcsOeZu+W9leS/oeaBrw0KICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKQ0KICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJykNCiAgICAgICAgICAgIC8vIOa4heepunZ1ZXjnmbvlvZXkv6Hmga8NCiAgICAgICAgICAgIHRoaXMuc2V0VXNlcignJykNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICAgICAgbmFtZTogJ0xvZ2luJw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMubm90aWZ5U3VjY2VlZCgn5a+G56CB5bey5L+u5pS577yM6K+36YeN5paw55m75b2VJykNCiAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5zdGF0dXMgPT09IDIwMDAxKSB7DQogICAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCfor6Xpk77mjqXlt7LlpLHmlYjvvIzor7fph43mlrDnu5Hlrpov6Kej57uRJywgcmVzLm1zZykNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICAgICAgbmFtZTogJ0NlbnRlcicNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMubm90aWZ5RXJyb3IoJ+mCrueusee7keWumi/op6Pnu5HlpLHotKUnLCByZXMubXNnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCfpgq7nrrHnu5Hlrpov6Kej57uR5aSx6LSlJywgZXJyb3IpDQogICAgICAgIH0pDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMudG9rZW4gPSB0aGlzLiRyb3V0ZS5wYXJhbXMudG9rZW4NCiAgICB0aGlzLnZhaWxkKCkNCiAgfSwNCiAgY29tcG9uZW50czoge30NCn0NCg=="},{"version":3,"sources":["VaildEmail.vue"],"names":[],"mappings":";AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VaildEmail.vue","sourceRoot":"src/views","sourcesContent":["<!--\r\n * @Descripttion: 登录页面组件\r\n * @Author: congz\r\n * @Date: 2020-06-11 11:08:34\r\n * @LastEditors: congz\r\n * @LastEditTime: 2020-08-09 20:05:20\r\n--> \r\n\r\n<template>\r\n  <div class=\"vaild-email\">\r\n    <div class=\"vaild-email-content\">\r\n      <p>{{message}}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport * as userAPI from '@/api/users'\r\nimport { mapActions } from 'vuex'\r\nexport default {\r\n  name: 'VaildEmail',\r\n  data() {\r\n    return {\r\n      token: '',\r\n      message: '正在绑定/解绑邮箱，请稍候...'\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['setUser']),\r\n    vaild() {\r\n      userAPI\r\n        .vaildEmail(this.token)\r\n        .then(res => {\r\n          if (res.status === 200) {\r\n            let user = JSON.stringify(res.data)\r\n            localStorage.setItem('user', user)\r\n            this.setUser(res.data)\r\n            this.message = '邮箱绑定/解绑成功，跳转页面中...'\r\n            this.$router.push({\r\n              name: 'Center'\r\n            })\r\n            this.notifySucceed('绑定/解绑成功')\r\n          } else if (res.status === 201) {\r\n            // 清空本地登录信息\r\n            localStorage.removeItem('user')\r\n            localStorage.removeItem('token')\r\n            // 清空vuex登录信息\r\n            this.setUser('')\r\n            this.$router.push({\r\n              name: 'Login'\r\n            })\r\n            this.notifySucceed('密码已修改，请重新登录')\r\n          } else if (res.status === 20001) {\r\n            this.notifyError('该链接已失效，请重新绑定/解绑', res.msg)\r\n            this.$router.push({\r\n              name: 'Center'\r\n            })\r\n          } else {\r\n            this.notifyError('邮箱绑定/解绑失败', res.msg)\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.notifyError('邮箱绑定/解绑失败', error)\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    this.token = this.$route.params.token\r\n    this.vaild()\r\n  },\r\n  components: {}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.vaild-email {\r\n  height: 700px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.vaild-email .vaild-email-content {\r\n  width: 500px;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n}\r\n</style>\r\n"]}]}