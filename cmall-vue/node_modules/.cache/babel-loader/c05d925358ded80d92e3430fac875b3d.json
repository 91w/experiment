{"remainingRequest":"D:\\myShop\\cmall-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myShop\\cmall-vue\\src\\views\\Service.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\myShop\\cmall-vue\\src\\views\\Service.vue","mtime":1714695998478},{"path":"D:\\myShop\\cmall-vue\\babel.config.js","mtime":1713966379331},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1714004800982},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1714004801336}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICogYXMgY2hhdEFQSSBmcm9tICdAL2FwaS9jaGF0JzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBxdWVzdGlvbjogJycsCiAgICAgIGhpc3Rvcnk6ICcnLAogICAgICBhbnN3ZXI6ICcnLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbm9Nb3JlOiBmYWxzZSwKICAgICAgY291bnQ6IDAsCiAgICAgIHVzZXJpZDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKS5pZAogICAgfTsKICB9LAogIGFjdGl2YXRlZDogZnVuY3Rpb24gYWN0aXZhdGVkKCkgewogICAgLy8g6I635Y+W6aaW6aG15pWw5o2uCiAgICB0aGlzLmdldEhpc3RvcnkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEhpc3Rvcnk6IGZ1bmN0aW9uIGdldEhpc3RvcnkoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIC8vIOiOt+WPluWOhuWPsuaVsOaNrgogICAgICBjaGF0QVBJLmxpc3RIaXN0b3J5KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5tc2cgPT09ICfmiJDlip8nKSB7CiAgICAgICAgICBfdGhpcy5oaXN0b3J5ID0gcmVzLmRhdGE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLm5vdGlmeUVycm9yKCfojrflj5bljoblj7LorrDlvZXlpLHotKUnLCByZXMubXNnKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpcy5ub3RpZnlFcnJvcign6I635Y+W5Y6G5Y+y6K6w5b2V5aSx6LSlMScsIGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoQW5zd2VyOiBmdW5jdGlvbiBmZXRjaEFuc3dlcihxdWVzdGlvbikgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgY2hhdEFQSS5wb3N0Q2hhdChxdWVzdGlvbikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2coIumXriIsIHJlcyk7CiAgICAgICAgX3RoaXMyLmFuc3dlciA9IHJlcy5hbnN3ZXI7CiAgICAgICAgX3RoaXMyLmhpc3RvcnkucHVzaCh7CiAgICAgICAgICB1c2VyY29udGVudDogcXVlc3Rpb24sCiAgICAgICAgICBzZXJ2aWNlY29udGVudDogcmVzLmFuc3dlcgogICAgICAgIH0pOwogICAgICAgIF90aGlzMi5xdWVzdGlvbiA9ICcnOyAvLyDmuIXnqbrovpPlhaXmoYYKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["chatAPI","data","question","history","answer","loading","noMore","count","userid","JSON","parse","localStorage","getItem","id","activated","getHistory","methods","_this","listHistory","then","res","msg","notifyError","catch","err","fetchAnswer","_this2","postChat","console","log","push","usercontent","servicecontent"],"sources":["src/views/Service.vue"],"sourcesContent":["<template>\r\n    <div class=\"common-layout\">\r\n        <el-container>\r\n          <el-header>\r\n            <el-row :gutter=\"20\">\r\n                <el-col :span=\"12\" :offset=\"6\">\r\n                  <h2>官方客服，有什么需要直接询问</h2>\r\n                </el-col>\r\n            </el-row>\r\n          </el-header>    \r\n            <div class=\"chat-container\">\r\n                <div class=\"chat-history\" style=\"height: 500px; overflow-y: auto\">\r\n                    <ul v-infinite-scroll  class=\"infinite-list\" style=\"overflow: auto\">\r\n                        <li v-for=\"(item, index) in history\" :key=\"index\" class=\"infinite-list-item\">\r\n                          <el-divider />\r\n                          <el-avatar src=\"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png\" size=\"40\"></el-avatar>\r\n                          <span>{{ item.usercontent }}</span>\r\n                          <el-divider />\r\n                          <span>{{ item.servicecontent }}</span>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div class=\"input-area\" >\r\n                    <el-input \r\n                        v-model=\"question\" \r\n                        placeholder=\"请输入问题\" \r\n                        class=\"input-field\" :rows=\"2\"\r\n                        type=\"textarea\"\r\n                        autosize/>\r\n                    <el-button @click=\"fetchAnswer(question)\" type=\"primary\" class=\"sumbit-btn\">提交</el-button>\r\n                </div>\r\n            </div>  \r\n            \r\n        </el-container>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport * as chatAPI from '@/api/chat'\r\nexport default {\r\n  data() {\r\n    return { \r\n      question: '',\r\n      history: '',\r\n      answer: '',\r\n      loading: false,\r\n      noMore: false,\r\n      count: 0,\r\n      userid: JSON.parse(localStorage.getItem('user')).id\r\n    };\r\n  },\r\n  activated() {\r\n    // 获取首页数据\r\n    this.getHistory()\r\n  },\r\n  methods: {\r\n    getHistory() {\r\n      // 获取历史数据\r\n      chatAPI\r\n        .listHistory()\r\n        .then(res => {\r\n          if (res.msg === '成功') {\r\n            this.history = res.data\r\n          }  else {\r\n            this.notifyError('获取历史记录失败', res.msg)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.notifyError('获取历史记录失败1', err)\r\n        })\r\n    },\r\n    fetchAnswer(question) {\r\n      chatAPI\r\n        .postChat(question)\r\n        .then(res => {\r\n            console.log(\"问\", res)\r\n            this.answer = res.answer\r\n            this.history.push({\r\n                usercontent: question,\r\n                servicecontent: res.answer\r\n            });\r\n            this.question = ''; // 清空输入框\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100vh;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .chat-history {\r\n    overflow-y: auto;\r\n    padding: 10px;\r\n    height: 90%;\r\n  }\r\n  \r\n  .input-area {\r\n    position: relative;\r\n    top: 20%;\r\n    justify-content: center;\r\n    display: flex;\r\n    padding: 10px;\r\n    align-items: center;\r\n  }\r\n  \r\n  .input-field {\r\n    flex-grow: 1;\r\n    margin-right: 10px;\r\n  }\r\n  \r\n  .submit-btn {\r\n    padding: 10px 20px;\r\n  }\r\n</style>\r\n\r\n "],"mappings":";;AAsCA,YAAAA,OAAA;AACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;MACAC,OAAA;MACAC,MAAA;MACAC,OAAA;MACAC,MAAA;MACAC,KAAA;MACAC,MAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA,UAAAC;IACA;EACA;EACAC,SAAA,WAAAA,UAAA;IACA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACAD,UAAA,WAAAA,WAAA;MAAA,IAAAE,KAAA;MACA;MACAjB,OAAA,CACAkB,WAAA,GACAC,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,GAAA;UACAJ,KAAA,CAAAd,OAAA,GAAAiB,GAAA,CAAAnB,IAAA;QACA;UACAgB,KAAA,CAAAK,WAAA,aAAAF,GAAA,CAAAC,GAAA;QACA;MACA,GACAE,KAAA,WAAAC,GAAA;QACAP,KAAA,CAAAK,WAAA,cAAAE,GAAA;MACA;IACA;IACAC,WAAA,WAAAA,YAAAvB,QAAA;MAAA,IAAAwB,MAAA;MACA1B,OAAA,CACA2B,QAAA,CAAAzB,QAAA,EACAiB,IAAA,WAAAC,GAAA;QACAQ,OAAA,CAAAC,GAAA,MAAAT,GAAA;QACAM,MAAA,CAAAtB,MAAA,GAAAgB,GAAA,CAAAhB,MAAA;QACAsB,MAAA,CAAAvB,OAAA,CAAA2B,IAAA;UACAC,WAAA,EAAA7B,QAAA;UACA8B,cAAA,EAAAZ,GAAA,CAAAhB;QACA;QACAsB,MAAA,CAAAxB,QAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}