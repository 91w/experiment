{"remainingRequest":"D:\\myShop\\cmall-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myShop\\cmall-vue\\src\\views\\VaildEmail.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\myShop\\cmall-vue\\src\\views\\VaildEmail.vue","mtime":1713966379509},{"path":"D:\\myShop\\cmall-vue\\babel.config.js","mtime":1713966379331},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1714004800982},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1714004801336}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovbXlTaG9wL2NtYWxsLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAqIGFzIHVzZXJBUEkgZnJvbSAnQC9hcGkvdXNlcnMnOwppbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVmFpbGRFbWFpbCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRva2VuOiAnJywKICAgICAgbWVzc2FnZTogJ+ato+WcqOe7keWumi/op6Pnu5Hpgq7nrrHvvIzor7fnqI3lgJkuLi4nCiAgICB9OwogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsnc2V0VXNlciddKSksIHt9LCB7CiAgICB2YWlsZDogZnVuY3Rpb24gdmFpbGQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHVzZXJBUEkudmFpbGRFbWFpbCh0aGlzLnRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICB2YXIgdXNlciA9IEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgdXNlcik7CiAgICAgICAgICBfdGhpcy5zZXRVc2VyKHJlcy5kYXRhKTsKICAgICAgICAgIF90aGlzLm1lc3NhZ2UgPSAn6YKu566x57uR5a6aL+ino+e7keaIkOWKn++8jOi3s+i9rOmhtemdouS4rS4uLic7CiAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnQ2VudGVyJwogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpcy5ub3RpZnlTdWNjZWVkKCfnu5Hlrpov6Kej57uR5oiQ5YqfJyk7CiAgICAgICAgfSBlbHNlIGlmIChyZXMuc3RhdHVzID09PSAyMDEpIHsKICAgICAgICAgIC8vIOa4heepuuacrOWcsOeZu+W9leS/oeaBrwogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgICAgLy8g5riF56m6dnVleOeZu+W9leS/oeaBrwogICAgICAgICAgX3RoaXMuc2V0VXNlcignJyk7CiAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnTG9naW4nCiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzLm5vdGlmeVN1Y2NlZWQoJ+WvhueggeW3suS/ruaUue+8jOivt+mHjeaWsOeZu+W9lScpOwogICAgICAgIH0gZWxzZSBpZiAocmVzLnN0YXR1cyA9PT0gMjAwMDEpIHsKICAgICAgICAgIF90aGlzLm5vdGlmeUVycm9yKCfor6Xpk77mjqXlt7LlpLHmlYjvvIzor7fph43mlrDnu5Hlrpov6Kej57uRJywgcmVzLm1zZyk7CiAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnQ2VudGVyJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLm5vdGlmeUVycm9yKCfpgq7nrrHnu5Hlrpov6Kej57uR5aSx6LSlJywgcmVzLm1zZyk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpcy5ub3RpZnlFcnJvcign6YKu566x57uR5a6aL+ino+e7keWksei0pScsIGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMudG9rZW4gPSB0aGlzLiRyb3V0ZS5wYXJhbXMudG9rZW47CiAgICB0aGlzLnZhaWxkKCk7CiAgfSwKICBjb21wb25lbnRzOiB7fQp9Ow=="},{"version":3,"names":["userAPI","mapActions","name","data","token","message","methods","_objectSpread","vaild","_this","vaildEmail","then","res","status","user","JSON","stringify","localStorage","setItem","setUser","$router","push","notifySucceed","removeItem","notifyError","msg","catch","error","created","$route","params","components"],"sources":["src/views/VaildEmail.vue"],"sourcesContent":["<!--\r\n * @Descripttion: 登录页面组件\r\n * @Author: congz\r\n * @Date: 2020-06-11 11:08:34\r\n * @LastEditors: congz\r\n * @LastEditTime: 2020-08-09 20:05:20\r\n--> \r\n\r\n<template>\r\n  <div class=\"vaild-email\">\r\n    <div class=\"vaild-email-content\">\r\n      <p>{{message}}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport * as userAPI from '@/api/users'\r\nimport { mapActions } from 'vuex'\r\nexport default {\r\n  name: 'VaildEmail',\r\n  data() {\r\n    return {\r\n      token: '',\r\n      message: '正在绑定/解绑邮箱，请稍候...'\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['setUser']),\r\n    vaild() {\r\n      userAPI\r\n        .vaildEmail(this.token)\r\n        .then(res => {\r\n          if (res.status === 200) {\r\n            let user = JSON.stringify(res.data)\r\n            localStorage.setItem('user', user)\r\n            this.setUser(res.data)\r\n            this.message = '邮箱绑定/解绑成功，跳转页面中...'\r\n            this.$router.push({\r\n              name: 'Center'\r\n            })\r\n            this.notifySucceed('绑定/解绑成功')\r\n          } else if (res.status === 201) {\r\n            // 清空本地登录信息\r\n            localStorage.removeItem('user')\r\n            localStorage.removeItem('token')\r\n            // 清空vuex登录信息\r\n            this.setUser('')\r\n            this.$router.push({\r\n              name: 'Login'\r\n            })\r\n            this.notifySucceed('密码已修改，请重新登录')\r\n          } else if (res.status === 20001) {\r\n            this.notifyError('该链接已失效，请重新绑定/解绑', res.msg)\r\n            this.$router.push({\r\n              name: 'Center'\r\n            })\r\n          } else {\r\n            this.notifyError('邮箱绑定/解绑失败', res.msg)\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.notifyError('邮箱绑定/解绑失败', error)\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    this.token = this.$route.params.token\r\n    this.vaild()\r\n  },\r\n  components: {}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.vaild-email {\r\n  height: 700px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.vaild-email .vaild-email-content {\r\n  width: 500px;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n}\r\n</style>\r\n"],"mappings":";;;AAgBA,YAAAA,OAAA;AACA,SAAAC,UAAA;AACA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,KAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA,EAAAC,aAAA,CAAAA,aAAA,KACAN,UAAA;IACAO,KAAA,WAAAA,MAAA;MAAA,IAAAC,KAAA;MACAT,OAAA,CACAU,UAAA,MAAAN,KAAA,EACAO,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,IAAAC,IAAA,GAAAC,IAAA,CAAAC,SAAA,CAAAJ,GAAA,CAAAT,IAAA;UACAc,YAAA,CAAAC,OAAA,SAAAJ,IAAA;UACAL,KAAA,CAAAU,OAAA,CAAAP,GAAA,CAAAT,IAAA;UACAM,KAAA,CAAAJ,OAAA;UACAI,KAAA,CAAAW,OAAA,CAAAC,IAAA;YACAnB,IAAA;UACA;UACAO,KAAA,CAAAa,aAAA;QACA,WAAAV,GAAA,CAAAC,MAAA;UACA;UACAI,YAAA,CAAAM,UAAA;UACAN,YAAA,CAAAM,UAAA;UACA;UACAd,KAAA,CAAAU,OAAA;UACAV,KAAA,CAAAW,OAAA,CAAAC,IAAA;YACAnB,IAAA;UACA;UACAO,KAAA,CAAAa,aAAA;QACA,WAAAV,GAAA,CAAAC,MAAA;UACAJ,KAAA,CAAAe,WAAA,oBAAAZ,GAAA,CAAAa,GAAA;UACAhB,KAAA,CAAAW,OAAA,CAAAC,IAAA;YACAnB,IAAA;UACA;QACA;UACAO,KAAA,CAAAe,WAAA,cAAAZ,GAAA,CAAAa,GAAA;QACA;MACA,GACAC,KAAA,WAAAC,KAAA;QACAlB,KAAA,CAAAe,WAAA,cAAAG,KAAA;MACA;IACA;EAAA,EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAxB,KAAA,QAAAyB,MAAA,CAAAC,MAAA,CAAA1B,KAAA;IACA,KAAAI,KAAA;EACA;EACAuB,UAAA;AACA","ignoreList":[]}]}