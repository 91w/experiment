{"remainingRequest":"D:\\myShop\\cmall-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myShop\\cmall-vue\\src\\views\\Service.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\myShop\\cmall-vue\\src\\views\\Service.vue","mtime":1714638394836},{"path":"D:\\myShop\\cmall-vue\\babel.config.js","mtime":1713966379331},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1714004800982},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1714004801336}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoYXRJbnB1dDogJycsCiAgICAgIG1lc3NhZ2VzOiBbXSwKICAgICAgdXNlckljb246ICcvc3RhdGljL2ltYWdlcy91c2VyL3t7IGN1cnJlbnRfdXNlci5hdmF0YXIgfX0nLAogICAgICAvLyBBZGp1c3QgYXMgbmVlZGVkIGZvciBkeW5hbWljIHBhdGhzCiAgICAgIGJvdEljb246ICcvc3RhdGljL2ltYWdlcy9haWNoYXQvY2hhdGdwdC5wbmcnLAogICAgICBpc1NlbmRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYWRkVXNlck1lc3NhZ2U6IGZ1bmN0aW9uIGFkZFVzZXJNZXNzYWdlKG1lc3NhZ2UpIHsKICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsKICAgICAgICB0ZXh0OiBtZXNzYWdlLAogICAgICAgIGljb246IHRoaXMudXNlckljb24sCiAgICAgICAgc2VuZGVyOiAndXNlcicKICAgICAgfSk7CiAgICAgIHRoaXMuY2hhdElucHV0ID0gJyc7CiAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTsKICAgIH0sCiAgICBhZGRCb3RNZXNzYWdlOiBmdW5jdGlvbiBhZGRCb3RNZXNzYWdlKG1lc3NhZ2UpIHsKICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsKICAgICAgICB0ZXh0OiBtZXNzYWdlLAogICAgICAgIGljb246IHRoaXMuYm90SWNvbiwKICAgICAgICBzZW5kZXI6ICdib3QnCiAgICAgIH0pOwogICAgICB0aGlzLmNoYXRJbnB1dCA9ICcnOwogICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7CiAgICB9LAogICAgc2Nyb2xsVG9Cb3R0b206IGZ1bmN0aW9uIHNjcm9sbFRvQm90dG9tKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNoYXRXaW5kb3cgPSBfdGhpcy4kcmVmcy5jaGF0V2luZG93OwogICAgICAgIGNoYXRXaW5kb3cuc2Nyb2xsVG9wID0gY2hhdFdpbmRvdy5zY3JvbGxIZWlnaHQ7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbmRNZXNzYWdlOiBmdW5jdGlvbiBzZW5kTWVzc2FnZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIGlmICghdGhpcy5jaGF0SW5wdXQudHJpbSgpKSB7CiAgICAgICAgYWxlcnQoIuivt+i+k+WFpeWGheWuue+8gSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgbWVzc2FnZSA9IHRoaXMuY2hhdElucHV0OwogICAgICB0aGlzLmFkZFVzZXJNZXNzYWdlKG1lc3NhZ2UpOwogICAgICB0aGlzLmlzU2VuZGluZyA9IHRydWU7CiAgICAgIGF4aW9zLnBvc3QoJy9jaGF0JywgewogICAgICAgIHByb21wdDogSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuYWRkQm90TWVzc2FnZShyZXNwb25zZS5kYXRhLmNvbnRlbnQpOwogICAgICAgIF90aGlzMi5pc1NlbmRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMyLmFkZEJvdE1lc3NhZ2UoJzxzcGFuIHN0eWxlPSJjb2xvcjpyZWQ7Ij7lh7rplJnllabvvIHor7fnqI3lkI7lho3or5UhPC9zcGFuPicpOwogICAgICAgIF90aGlzMi5pc1NlbmRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["data","chatInput","messages","userIcon","botIcon","isSending","methods","addUserMessage","message","push","text","icon","sender","scrollToBottom","addBotMessage","_this","$nextTick","chatWindow","$refs","scrollTop","scrollHeight","sendMessage","_this2","trim","alert","axios","post","prompt","JSON","stringify","then","response","content","catch","error"],"sources":["src/views/Service.vue"],"sourcesContent":["<!--\r\n * @Descripttion: 关于页面组件\r\n * @Author: congz\r\n * @Date: 2020-07-11 19:29:46\r\n * @LastEditors: congz\r\n * @LastEditTime: 2020-08-04 11:20:44\r\n--> \r\n\r\n\r\n<template>\r\n    <div>\r\n        <div class=\"row\">\r\n            <div class=\"col-xs-12\">\r\n              <div>\r\n                <h1 class=\"text-center m-b-lg\">Chat with ChatGPT</h1>\r\n              </div>\r\n            <div class=\"answer\">\r\n              <div id=\"chatWindow\" class=\"mb-3\"></div>\r\n                <div class=\"input-group ipt\">\r\n                  <div class=\"col-xs-12\">\r\n                    <textarea id=\"chatInput\" class=\"form-control\" rows=\"1\"></textarea>\r\n                  </div>\r\n                  <button id=\"chatBtn\" class=\"btn btn-primary\" type=\"button\">Go !</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n        </div>\r\n    </div>  \r\n</template>\r\n  \r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      chatInput: '',\r\n      messages: [],\r\n      userIcon: '/static/images/user/{{ current_user.avatar }}', // Adjust as needed for dynamic paths\r\n      botIcon: '/static/images/aichat/chatgpt.png',\r\n      isSending: false\r\n    };\r\n  },\r\n  methods: {\r\n    addUserMessage(message) {\r\n      this.messages.push({ text: message, icon: this.userIcon, sender: 'user' });\r\n      this.chatInput = '';\r\n      this.scrollToBottom();\r\n    },\r\n    addBotMessage(message) {\r\n      this.messages.push({ text: message, icon: this.botIcon, sender: 'bot' });\r\n      this.chatInput = '';\r\n      this.scrollToBottom();\r\n    },\r\n    scrollToBottom() {\r\n      this.$nextTick(() => {\r\n        const chatWindow = this.$refs.chatWindow;\r\n        chatWindow.scrollTop = chatWindow.scrollHeight;\r\n      });\r\n    },\r\n    sendMessage() {\r\n      if (!this.chatInput.trim()) {\r\n        alert(\"请输入内容！\");\r\n        return;\r\n      }\r\n      const message = this.chatInput;\r\n      this.addUserMessage(message);\r\n      this.isSending = true;\r\n\r\n      axios.post('/chat', { prompt: JSON.stringify(message) })\r\n        .then(response => {\r\n          this.addBotMessage(response.data.content);\r\n          this.isSending = false;\r\n        })\r\n        .catch(error => {\r\n          this.addBotMessage('<span style=\"color:red;\">出错啦！请稍后再试!</span>');\r\n          this.isSending = false;\r\n        });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n .answer{\r\n   width: 100%;\r\n   position: relative;\r\n   height: 70vh;\r\n }\r\n\r\n .ipt{\r\n   display:flex;\r\n   align-items: center;\r\n   position: absolute;\r\n   bottom: 60px;\r\n   margin: 0 15px;\r\n   padding-right: 15px;\r\n   border-radius: 15px;\r\n   width: calc(100% - 30px);\r\n   height: 50px;\r\n   border: 1px solid #e7eaec;\r\n }\r\n .ipt textarea {\r\n   resize: none;\r\n   overflow-y: auto;\r\n   border: none;\r\n   box-shadow: none;\r\n }\r\n .ipt textarea:focus{\r\n     border: none !important;\r\n     box-shadow: none !important;\r\n }\r\n\r\n #chatWindow {\r\n   max-height: calc(70vh - 120px);\r\n   height:auto;\r\n   overflow-y: auto;\r\n }\r\n\r\n .message-bubble {\r\n     padding: 10px;\r\n     margin: 5px;\r\n     display: flex;\r\n     align-items: flex-start;\r\n     border-bottom: 1px dashed #e7eaec;\r\n }\r\n\r\n\r\n .message-bubble p {\r\n     font-size: 18px;\r\n     margin-left:15px;\r\n }\r\n\r\n .chat-icon {\r\n     width: 30px;\r\n     height: 30px;\r\n     border-radius: 3px;\r\n }\r\n</style>\r\n "],"mappings":";;;AA+BA;EACAA,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA;MACAC,QAAA;MACAC,QAAA;MAAA;MACAC,OAAA;MACAC,SAAA;IACA;EACA;EACAC,OAAA;IACAC,cAAA,WAAAA,eAAAC,OAAA;MACA,KAAAN,QAAA,CAAAO,IAAA;QAAAC,IAAA,EAAAF,OAAA;QAAAG,IAAA,OAAAR,QAAA;QAAAS,MAAA;MAAA;MACA,KAAAX,SAAA;MACA,KAAAY,cAAA;IACA;IACAC,aAAA,WAAAA,cAAAN,OAAA;MACA,KAAAN,QAAA,CAAAO,IAAA;QAAAC,IAAA,EAAAF,OAAA;QAAAG,IAAA,OAAAP,OAAA;QAAAQ,MAAA;MAAA;MACA,KAAAX,SAAA;MACA,KAAAY,cAAA;IACA;IACAA,cAAA,WAAAA,eAAA;MAAA,IAAAE,KAAA;MACA,KAAAC,SAAA;QACA,IAAAC,UAAA,GAAAF,KAAA,CAAAG,KAAA,CAAAD,UAAA;QACAA,UAAA,CAAAE,SAAA,GAAAF,UAAA,CAAAG,YAAA;MACA;IACA;IACAC,WAAA,WAAAA,YAAA;MAAA,IAAAC,MAAA;MACA,UAAArB,SAAA,CAAAsB,IAAA;QACAC,KAAA;QACA;MACA;MACA,IAAAhB,OAAA,QAAAP,SAAA;MACA,KAAAM,cAAA,CAAAC,OAAA;MACA,KAAAH,SAAA;MAEAoB,KAAA,CAAAC,IAAA;QAAAC,MAAA,EAAAC,IAAA,CAAAC,SAAA,CAAArB,OAAA;MAAA,GACAsB,IAAA,WAAAC,QAAA;QACAT,MAAA,CAAAR,aAAA,CAAAiB,QAAA,CAAA/B,IAAA,CAAAgC,OAAA;QACAV,MAAA,CAAAjB,SAAA;MACA,GACA4B,KAAA,WAAAC,KAAA;QACAZ,MAAA,CAAAR,aAAA;QACAQ,MAAA,CAAAjB,SAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}