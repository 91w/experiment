{"remainingRequest":"D:\\myShop\\cmall-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myShop\\cmall-vue\\src\\views\\CallbackQQ.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\myShop\\cmall-vue\\src\\views\\CallbackQQ.vue","mtime":1714377406330},{"path":"D:\\myShop\\cmall-vue\\babel.config.js","mtime":1713966379331},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1714004800982},{"path":"D:\\myShop\\cmall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1714004799971},{"path":"D:\\myShop\\cmall-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1714004801336}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovbXlTaG9wL2NtYWxsLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0ICogYXMgdXNlckFQSSBmcm9tICdAL2FwaS91c2Vycyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2FsbGJhY2tRUScsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvZGU6ICcnLAogICAgICBzdGF0ZTogJycKICAgIH07CiAgfSwKICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uIGFjdGl2YXRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5jb2RlICE9IHVuZGVmaW5lZCkgewogICAgICB0aGlzLmNvZGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS5jb2RlOwogICAgfQogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnN0YXRlICE9IHVuZGVmaW5lZCkgewogICAgICB0aGlzLnN0YXRlID0gdGhpcy4kcm91dGUucXVlcnkuc3RhdGU7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgLy8g55uR5ZCsY29kZeeahOWPmOWMlgogICAgY29kZTogZnVuY3Rpb24gY29kZSgpIHsKICAgICAgdGhpcy5xcUxvZ2luKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoWydzZXRVc2VyJ10pKSwge30sIHsKICAgIHFxTG9naW46IGZ1bmN0aW9uIHFxTG9naW4oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGlmICh0aGlzLnN0YXRlICE9ICdjb25neicpIHsKICAgICAgICB0aGlzLm5vdGlmeUVycm9yKCfkuI3mmK/mnKznq5nnmoTor7fmsYInLCAnJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHVzZXJBUEkucXFMb2dpbih0aGlzLmNvZGUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgLy8g55m75b2V5L+h5oGv5a2Y5Yiw5pys5ZywCiAgICAgICAgICB2YXIgdXNlciA9IEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLnVzZXIpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCB1c2VyKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICAgIC8vIOeZu+W9leS/oeaBr+WtmOWIsHZ1ZXgKICAgICAgICAgIF90aGlzLnNldFVzZXIocmVzLmRhdGEudXNlcik7CiAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgICAgIH0pOwogICAgICAgICAgLy8g5by55Ye66YCa55+l5qGG5o+Q56S655m75b2V5oiQ5Yqf5L+h5oGvCiAgICAgICAgICBfdGhpcy5ub3RpZnlTdWNjZWVkKCfnmbvlvZXmiJDlip8nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMubm90aWZ5RXJyb3IoJ+eZu+W9leWksei0pScsIHJlcy5tc2cpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMubm90aWZ5RXJyb3IoJ+eZu+W9leWksei0pScsIGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfSkKfTs="},{"version":3,"names":["mapActions","userAPI","name","data","code","state","activated","$route","query","undefined","watch","qqLogin","methods","_objectSpread","_this","notifyError","then","res","status","user","JSON","stringify","localStorage","setItem","token","setUser","$router","push","notifySucceed","msg","catch","error"],"sources":["src/views/CallbackQQ.vue"],"sourcesContent":["<!--\r\n * @Descripttion: 关于QQ回调组件\r\n * @Author: congz\r\n * @Date: 2020-07-11 19:29:46\r\n * @LastEditors: congz\r\n * @LastEditTime: 2020-08-19 10:39:48\r\n--> \r\n\r\n\r\n<template>\r\n  <div class=\"callback\" id=\"callback\" name=\"callback\">\r\n    <div class=\"callback-content\">\r\n      <div class=\"callback-text\">\r\n        <p>正在登录中...</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapActions } from 'vuex'\r\nimport * as userAPI from '@/api/users'\r\nexport default {\r\n  name: 'CallbackQQ',\r\n\r\n  data() {\r\n    return {\r\n      code: '',\r\n      state: ''\r\n    }\r\n  },\r\n  activated() {\r\n    if (this.$route.query.code != undefined) {\r\n      this.code = this.$route.query.code\r\n    }\r\n    if (this.$route.query.state != undefined) {\r\n      this.state = this.$route.query.state\r\n    }\r\n  },\r\n  watch: {\r\n    // 监听code的变化\r\n    code: function() {\r\n      this.qqLogin()\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['setUser']),\r\n    qqLogin() {\r\n      if (this.state != 'congz') {\r\n        this.notifyError('不是本站的请求', '')\r\n        return\r\n      }\r\n      userAPI\r\n        .qqLogin(this.code)\r\n        .then(res => {\r\n          if (res.status == 200) {\r\n            // 登录信息存到本地\r\n            let user = JSON.stringify(res.data.user)\r\n            localStorage.setItem('user', user)\r\n            localStorage.setItem('token', res.data.token)\r\n            // 登录信息存到vuex\r\n            this.setUser(res.data.user)\r\n            this.$router.push({\r\n              name: 'Home'\r\n            })\r\n            // 弹出通知框提示登录成功信息\r\n            this.notifySucceed('登录成功')\r\n          } else {\r\n            this.notifyError('登录失败', res.msg)\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.notifyError('登录失败', error)\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.callback .callback-content {\r\n  height: 700px;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.callback .callback-content .callback-text {\r\n  color: #757575;\r\n  width: 500px;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n}\r\n</style>"],"mappings":";;;AAmBA,SAAAA,UAAA;AACA,YAAAC,OAAA;AACA;EACAC,IAAA;EAEAC,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;MACAC,KAAA;IACA;EACA;EACAC,SAAA,WAAAA,UAAA;IACA,SAAAC,MAAA,CAAAC,KAAA,CAAAJ,IAAA,IAAAK,SAAA;MACA,KAAAL,IAAA,QAAAG,MAAA,CAAAC,KAAA,CAAAJ,IAAA;IACA;IACA,SAAAG,MAAA,CAAAC,KAAA,CAAAH,KAAA,IAAAI,SAAA;MACA,KAAAJ,KAAA,QAAAE,MAAA,CAAAC,KAAA,CAAAH,KAAA;IACA;EACA;EACAK,KAAA;IACA;IACAN,IAAA,WAAAA,KAAA;MACA,KAAAO,OAAA;IACA;EACA;EACAC,OAAA,EAAAC,aAAA,CAAAA,aAAA,KACAb,UAAA;IACAW,OAAA,WAAAA,QAAA;MAAA,IAAAG,KAAA;MACA,SAAAT,KAAA;QACA,KAAAU,WAAA;QACA;MACA;MACAd,OAAA,CACAU,OAAA,MAAAP,IAAA,EACAY,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA;UACA,IAAAC,IAAA,GAAAC,IAAA,CAAAC,SAAA,CAAAJ,GAAA,CAAAd,IAAA,CAAAgB,IAAA;UACAG,YAAA,CAAAC,OAAA,SAAAJ,IAAA;UACAG,YAAA,CAAAC,OAAA,UAAAN,GAAA,CAAAd,IAAA,CAAAqB,KAAA;UACA;UACAV,KAAA,CAAAW,OAAA,CAAAR,GAAA,CAAAd,IAAA,CAAAgB,IAAA;UACAL,KAAA,CAAAY,OAAA,CAAAC,IAAA;YACAzB,IAAA;UACA;UACA;UACAY,KAAA,CAAAc,aAAA;QACA;UACAd,KAAA,CAAAC,WAAA,SAAAE,GAAA,CAAAY,GAAA;QACA;MACA,GACAC,KAAA,WAAAC,KAAA;QACAjB,KAAA,CAAAC,WAAA,SAAAgB,KAAA;MACA;IACA;EAAA;AAEA","ignoreList":[]}]}